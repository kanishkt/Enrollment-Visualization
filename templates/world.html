{% extends "layout.html" %}
{% block body %}

<div class="container" id="main">
	<h1>Enrollment by Country</h1>
    <div id="map"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-geo-projection/0.2.16/d3.geo.projection.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.20/topojson.js"></script>
<script src="../static/d3-geomap/js/d3.geomap.js" type="text/javascript"></script>

<script type="text/javascript">
	var format = function(d) {
	    d = d / 1000000;
	    return d3.format(',.02f')(d) + 'M';
	}

	var map = d3.geomap.choropleth()
	    .geofile('../static/d3-geomap/topojson/world/countries.json')
	    .colors(colorbrewer.YlGnBu[9])
	    .column('number')
	    .format(format)
	    .legend(true)
	    .unitId('code');

	d3.csv('../data/country-2006.csv', function(error, data) {
	    d3.select('#map')
	        .datum(data)
	        .call(map.draw, map);
	});
</script>

{% endblock %}